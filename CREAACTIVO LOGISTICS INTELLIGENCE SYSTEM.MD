# CREAACTIVO LOGISTICS INTELLIGENCE SYSTEM
## Technical Specification Document v1.0

Proyecto Sistema de Captura y Consulta de Decisiones LogÃ­sticas  
Autor Flaco Huber  
Fecha Enero 2026  
Repositorio httpsgithub.comEiaellLogistica-

---

## 1. RESUMEN EJECUTIVO

### 1.1 Problema
El conocimiento operativo de logÃ­stica en Creaactivo existe exclusivamente en la cabeza del coordinador logÃ­stico y en conversaciones dispersas de WhatsApp. No hay sistema de registro que capture
- Acuerdos con proveedores (precios, tiempos, condiciones)
- Razones detrÃ¡s de decisiones excepcionales
- Historial consultable de operaciones pasadas
- Reportes de movilidad estructurados

### 1.2 SoluciÃ³n
Un bot de WhatsApp que
1. Recibe audios del coordinador logÃ­stico capturando informaciÃ³n operativa
2. Transcribe y estructura la informaciÃ³n automÃ¡ticamente
3. Persiste en Google Drive como fuente de verdad
4. Responde consultas por voz con respuestas en texto
5. Genera reportes de movilidad y pendientes

### 1.3 Usuario Principal
- Nombre Flaco (Coordinador de LogÃ­stica)
- Contexto Opera desde campo usando WhatsApp en celular personal
- Modo de interacciÃ³n Principalmente por voz (maneja frecuentemente)

---

## 2. CONTEXTO OPERATIVO

### 2.1 Estructura Organizacional
```
Natalia (Gerencia) â”€â”€â”€ Poder de veto absoluto, aprueba reembolsos
    â”‚
    â”œâ”€â”€ AngÃ©lica (Vendedora) â”€â”€â”€ Negocia con clientes, aprueba gastos extras
    â”‚
    â”œâ”€â”€ Johana (Vendedora) â”€â”€â”€ Negocia con clientes, aprueba gastos extras  
    â”‚
    â””â”€â”€ Flaco (LogÃ­stica) â”€â”€â”€ Ejecuta, coordina proveedores, gestiona entregas
```

### 2.2 Flujo de AutorizaciÃ³n de Gastos
```
Necesidad de motorizadotaxi
         â”‚
         â–¼
Flaco solicita a vendedora (WhatsApp)
         â”‚
         â–¼
Vendedora aprueba â—„â”€â”€â”€ CHECKPOINT OBLIGATORIO
         â”‚
         â–¼
Flaco adelanta dinero personal
         â”‚
         â–¼
Se ejecuta el servicio (inDrive)
         â”‚
         â–¼
Flaco reporta gasto a Natalia
         â”‚
         â–¼
Natalia reembolsa
         â”‚
         â–¼
Vendedora carga al cliente en presupuesto
```

### 2.3 Horizonte de PlanificaciÃ³n
- Visibilidad Casi cero - se sabe quÃ© hacer el mismo dÃ­a
- Fuente de prioridades WhatsApp entre vendedoras y Flaco
- Regla de override Natalia  AngÃ©licaJohana  Orden de llegada

---

## 3. MODELO DE DATOS

### 3.1 Entidad PEDIDO (Unidad Central)
```typescript
interface Pedido {
  id string;                     Generado automÃ¡ticamente
  cliente string;                Nombre del cliente (ej DHL, Inmobiliaria X)
  vendedora AngÃ©lica  Johana  Natalia;
  descripcion string;            QuÃ© se estÃ¡ produciendo
  estado EstadoPedido;
  fechaCompromiso Date;          CuÃ¡ndo debe entregarse
  rqNumero string;              NÃºmero de RQ cuando existe
  createdAt Date;
  updatedAt Date;
  notas string[];                Historial de notascambios
}

type EstadoPedido = 
   cotizacion         Esperando aprobaciÃ³n del cliente
   aprobado           Cliente confirmÃ³, listo para producciÃ³n
   en_produccion      Con el proveedor
   listo_recoger      Proveedor avisÃ³ que terminÃ³
   en_campo           Flaco saliÃ³ a recogerentregar
   entregado          Cliente recibiÃ³
   cerrado;           RQ completo
```

### 3.2 Entidad PROVEEDOR
```typescript
interface Proveedor {
  id string;
  nombre string;                 Nombre o alias (ej Hugo, Imprenta San Juan)
  contacto string;              TelÃ©fonoWhatsApp
  especialidad string[];         QuÃ© produce (ej [polos, bordados])
  condicionesPago string;        Ej 50% adelanto, 50% entrega
  factorDemora number;           DÃ­as extra a considerar (0 = cumple, 2 = pedir 2 dÃ­as antes)
  historialPrecios HistorialPrecio[];
  historialTiempos HistorialTiempo[];
  notas string[];
}

interface HistorialPrecio {
  fecha Date;
  producto string;
  cantidad number;
  precioUnitario number;
  precioTotal number;
}

interface HistorialTiempo {
  fecha Date;
  producto string;
  diasPrometidos number;
  diasReales number;
}
```

### 3.3 Entidad ACUERDO_PRODUCCION
```typescript
interface AcuerdoProduccion {
  id string;
  pedidoId string;               Referencia al pedido
  proveedorId string;            Referencia al proveedor
  producto string;               DescripciÃ³n del producto
  cantidad number;
  especificaciones string;       Ej bordado full color, tallas SML 8 cu
  costoTotal number;
  adelanto number;               Monto del adelanto
  porcentajeAdelanto number;     Ej 50
  fechaAcuerdo Date;
  fechaPrometida Date;           CuÃ¡ndo dijo el proveedor que estarÃ¡ listo
  fechaRealEntrega Date;        CuÃ¡ndo realmente estuvo listo
  estado pendiente  listo  recogido  problema;
  audioOriginal string;         Referencia al audio de captura
}
```

### 3.4 Entidad MOVIMIENTO_MOVILIDAD
```typescript
interface MovimientoMovilidad {
  id string;
  fecha Date;
  origen string;                 Ej Oficina, EstaciÃ³n Angamos
  destino string;                Ej La Victoria, San Isidro
  costo number;                  En soles
  tipoTransporte metro  combi  taxi  carro_propio;
  proposito string;              Ej Recoger producciÃ³n para AngÃ©lica - papelerÃ­a
  pedidoId string;              Referencia opcional al pedido
  requiereAprobacion boolean;    True si es taxiinDrive
  aprobadoPor string;           QuiÃ©n aprobÃ³ (si aplica)
}
```

### 3.5 Entidad GASTO_EXTRAORDINARIO
```typescript
interface GastoExtraordinario {
  id string;
  fecha Date;
  tipo motorizado  taxi  material  otro;
  monto number;
  descripcion string;
  pedidoId string;
  aprobadoPor string;            Vendedora que aprobÃ³
  reembolsado boolean;
  fechaReembolso Date;
}
```

### 3.6 Matriz de Costos por Zona (ConfiguraciÃ³n)
```typescript
interface MatrizCostos {
  rutas {
    origen string;
    destino string;
    costoCombi number;           Costo estÃ¡ndar modo combi
    tiempoEstimado number;       Minutos en hora normal
    tiempoHoraPunta number;      Minutos en hora punta
  }[];
}

 Ejemplo de rutas frecuentes a precargar
const rutasFrecuentes = [
  { origen Oficina Miraflores, destino La Victoria, costoCombi 6.40, tiempoEstimado 40, tiempoHoraPunta 70 },
  { origen Oficina Miraflores, destino San Isidro, costoCombi 3.20, tiempoEstimado 15, tiempoHoraPunta 30 },
  { origen Oficina Miraflores, destino San Borja, costoCombi 4.50, tiempoEstimado 25, tiempoHoraPunta 45 },
  { origen Oficina Miraflores, destino Centro Lima, costoCombi 6.40, tiempoEstimado 50, tiempoHoraPunta 90 },
   ... agregar mÃ¡s segÃºn uso real
];
```

---

## 4. ARQUITECTURA DEL SISTEMA

### 4.1 Diagrama de Alto Nivel
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WhatsApp      â”‚     â”‚   Bot Backend    â”‚     â”‚  Google Drive   â”‚
â”‚   (Usuario)     â”‚â”€â”€â”€â”€â–¶â”‚   (Procesador)   â”‚â”€â”€â”€â”€â–¶â”‚  (Persistencia) â”‚
â”‚                 â”‚â—€â”€â”€â”€â”€â”‚                  â”‚â—€â”€â”€â”€â”€â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚
        â”‚                       â–¼
        â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚  Whisper API     â”‚
        â”‚               â”‚  (TranscripciÃ³n) â”‚
        â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚
        â”‚                       â–¼
        â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚  Claude API      â”‚
        â”‚               â”‚  (ExtracciÃ³nNLU)â”‚
        â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Recordatorio   â”‚
â”‚  Fin de DÃ­a     â”‚
â”‚  (Cron Job)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Stack TecnolÃ³gico Propuesto
```yaml
WhatsApp Integration
  - whatsapp-web.js (librerÃ­a Node.js)
  - Alternativa Baileys (mÃ¡s ligero)
  
Backend
  - Node.js  TypeScript
  - Express o Fastify para API interna
  
TranscripciÃ³n
  - OpenAI Whisper API
  - Alternativa Whisper local (mÃ¡s privado, mÃ¡s lento)
  
Procesamiento de Lenguaje
  - Claude API (Anthropic)
  - Para extracciÃ³n de entidades, clasificaciÃ³n de intenciÃ³n, generaciÃ³n de respuestas
  
Persistencia
  - Google Drive API
  - Formato JSON files o Google Sheets
  - Estructura de carpetas en Drive
  
ProgramaciÃ³n de Tareas
  - node-cron para recordatorio de fin de dÃ­a
  
Hosting
  - Servidor local (Raspberry Pi  PC siempre encendido)
  - O VPS econÃ³mico (DigitalOcean, Hetzner)
```

### 4.3 Estructura de Google Drive
```
ğŸ“ Logistica_Creaactivo
â”œâ”€â”€ ğŸ“ data
â”‚   â”œâ”€â”€ pedidos.json
â”‚   â”œâ”€â”€ proveedores.json
â”‚   â”œâ”€â”€ acuerdos.json
â”‚   â”œâ”€â”€ movilidad.json
â”‚   â””â”€â”€ gastos.json
â”œâ”€â”€ ğŸ“ audios
â”‚   â””â”€â”€ ğŸ“ 2026-01
â”‚       â”œâ”€â”€ 2026-01-15_143022_acuerdo.ogg
â”‚       â””â”€â”€ 2026-01-15_180500_movilidad.ogg
â”œâ”€â”€ ğŸ“ reportes
â”‚   â””â”€â”€ ğŸ“ movilidad
â”‚       â”œâ”€â”€ 2026-01-15_movilidad.pdf
â”‚       â””â”€â”€ 2026-01-16_movilidad.pdf
â””â”€â”€ ğŸ“ config
    â”œâ”€â”€ matriz_costos.json
    â””â”€â”€ proveedores_conocidos.json
```

---

## 5. FLUJOS DE INTERACCIÃ“N

### 5.1 Flujo Captura de Acuerdo con Proveedor

Trigger Usuario envÃ­a audio al bot

Input de ejemplo (audio transcrito)
 Se mandÃ³ a producciÃ³n 24 polos con Hugo, pago de adelanto 50% con 250 soles, bordado full color, tallas S M L ocho de cada una, lo tendrÃ¡ listo para el jueves 3, para el cliente DHL

Procesamiento
1. Whisper transcribe audio â†’ texto
2. Claude extrae entidades
```json
{
  tipo acuerdo_produccion,
  proveedor Hugo,
  producto polos,
  cantidad 24,
  especificaciones bordado full color, tallas SML, 8 de cada una,
  adelanto 250,
  porcentajeAdelanto 50,
  costoTotal 500,
  fechaEntrega 2026-01-03,
  cliente DHL
}
```
3. Sistema buscacrea proveedor Hugo
4. Sistema buscacrea pedido para DHL
5. Sistema crea AcuerdoProduccion vinculado
6. Guarda audio original como referencia

Output (texto a WhatsApp)
```
âœ… Registrado
â€¢ 24 polos bordados con Hugo
â€¢ Adelanto S. 250 (50%)
â€¢ Entrega Jueves 3 enero
â€¢ Cliente DHL

Â¿Algo mÃ¡s
```

### 5.2 Flujo Consulta de Historial

Trigger Usuario envÃ­a audio con pregunta

Input de ejemplo (audio transcrito)
 Â¿CuÃ¡nto me cobrÃ³ Hugo la Ãºltima vez por polos bordados

Procesamiento
1. Whisper transcribe
2. Claude clasifica intenciÃ³n `consulta_historial_proveedor`
3. Sistema busca en historialPrecios de proveedor Hugo filtrando por polos
4. Claude genera respuesta natural

Output
```
Hugo te cobrÃ³ S. 500 por 24 polos bordados el 15 de diciembre (S. 20.83 cu). Antes de eso, el 3 de noviembre cobrÃ³ S. 450 por 20 polos (S. 22.50 cu).
```

### 5.3 Flujo Registro de Movilidad

Trigger Usuario envÃ­a audio describiendo movimiento

Input de ejemplo
 LleguÃ© a La Victoria, 3.20 en metro, vine a recoger telas para el pedido de la inmobiliaria

Procesamiento
1. TranscripciÃ³n
2. ExtracciÃ³n
```json
{
  tipo movimiento_movilidad,
  destino La Victoria,
  costo 3.20,
  tipoTransporte metro,
  proposito recoger telas para pedido inmobiliaria
}
```
3. Sistema infiere origen del Ãºltimo movimiento registrado
4. Vincula con pedido si encuentra match

Output
```
ğŸ“ Registrado Oficina â†’ La Victoria
ğŸ’° S. 3.20 (metro)
ğŸ“¦ Recojo telas - Inmobiliaria
```

### 5.4 Flujo Vista de Pendientes del DÃ­a

Trigger Usuario pregunta quÃ© tiene pendiente

Input de ejemplo
 Â¿QuÃ© tengo pendiente hoy

Procesamiento
1. Sistema filtra
   - Acuerdos con `fechaPrometida = hoy` y `estado = pendiente`
   - Pedidos con `estado = listo_recoger`
   - Pedidos con `estado = aprobado` y `fechaCompromiso` cercana
2. Ordena por ventana horaria  urgencia  cercanÃ­a (si hay ubicaciÃ³n)

Output
```
ğŸ“‹ Pendientes hoy (15 enero)

RECOGER
â€¢ Hugo (San Juan de Lurigancho) - 24 polos DHL
â€¢ Imprenta Central - Volantes Inmobiliaria X

ENTREGAR
â€¢ DHL San Isidro - Merchandising (prometido hoy)

PRODUCCIÃ“N (vigilar)
â€¢ Proveedor telas - debe avisar hoy o maÃ±ana
```

### 5.5 Flujo Recordatorio de Fin de DÃ­a

Trigger Cron job a las 530 PM

Mensaje automÃ¡tico del bot
```
ğŸ• Resumen del dÃ­a - Â¿Me faltÃ³ algo

RegistrÃ© hoy
â€¢ 2 acuerdos con proveedores
â€¢ 4 movimientos de movilidad
â€¢ 1 entrega completada

Â¿Hubo algo mÃ¡s que no capturÃ© CuÃ©ntame en un audio.
```

### 5.6 Flujo GeneraciÃ³n de Reporte de Movilidad

Trigger Usuario pide reporte o automÃ¡tico a fin de dÃ­a

Input
 Dame el reporte de movilidad de hoy

Output PDF o texto formateado con
```
REPORTE DE MOVILIDAD - 15 Enero 2026
Coordinador Flaco

 #  Origen               Destino          Costo   Motivo                          
-----------------------------------------------------------------------------------
 1  Oficina Miraflores   San Isidro       S. 3.20  Entrega DHL merchandising      
 2  San Isidro           La Victoria      S. 3.20  Recojo telas Inmobiliaria      
 3  La Victoria          Centro Lima      S. 3.20  Recojo producciÃ³n Hugo         
 4  Centro Lima          Oficina          S. 3.20  Retorno                        

TOTAL S. 12.80

---
Aprobado por _____________
Fecha _____________
```

---

## 6. PROCESAMIENTO DE LENGUAJE NATURAL

### 6.1 Prompt de ExtracciÃ³n de Entidades
```markdown
Eres un asistente de logÃ­stica. Extrae informaciÃ³n estructurada del siguiente texto transcrito de un audio.

El usuario es un coordinador logÃ­stico en Lima, PerÃº. Trabaja con proveedores de materiales promocionales (polos, impresiones, telas, etc.).

VOCABULARIO COMÃšN
- MandÃ© a producciÃ³n = se hizo un pedido a proveedor
- Adelanto = pago parcial inicial (usualmente 50%)
- Hugo, Carmen, etc. = nombres de proveedores frecuentes
- DHL, Inmobiliaria X = nombres de clientes

TEXTO A PROCESAR
{transcripcion}

EXTRAE en JSON
{
  tipo acuerdo_produccion  consulta  movimiento_movilidad  cambio_estado  otro,
  entidades { ... segÃºn el tipo ... },
  confianza 0-100,
  campos_faltantes [lista de campos importantes que no se mencionaron]
}
```

### 6.2 Prompt de Respuesta a Consultas
```markdown
Eres el asistente de logÃ­stica de Flaco. Responde de forma concisa y Ãºtil.

CONTEXTO
- Usuario consulta desde WhatsApp mientras trabaja en campo
- Prefiere respuestas cortas y directas
- Usa soles (S.) como moneda

DATOS DISPONIBLES
{datos_relevantes_json}

CONSULTA DEL USUARIO
{consulta}

Responde en texto plano (no markdown). SÃ© directo. Si no tienes la informaciÃ³n, dilo claramente.
```

---

## 7. INTEGRACIONES

### 7.1 WhatsApp Web.js - ConfiguraciÃ³n BÃ¡sica
```typescript
 Ejemplo de estructura inicial
import { Client, LocalAuth, Message } from 'whatsapp-web.js';

const client = new Client({
  authStrategy new LocalAuth(),
  puppeteer {
    headless true,
    args ['--no-sandbox']
  }
});

client.on('message', async (msg Message) = {
   Solo procesar mensajes del nÃºmero autorizado
  if (msg.from !== FLACO_NUMERO) return;
  
  if (msg.hasMedia && msg.type === 'ptt') {
     Procesar audio
    const media = await msg.downloadMedia();
    await processAudio(media, msg);
  } else if (msg.body) {
     Procesar texto
    await processText(msg.body, msg);
  }
});
```

### 7.2 Google Drive API - Operaciones BÃ¡sicas
```typescript
 Operaciones necesarias
interface DriveOperations {
   Leer archivo JSON
  readJSON(filename string) Promiseany;
  
   Escribiractualizar archivo JSON  
  writeJSON(filename string, data any) Promisevoid;
  
   Subir archivo de audio
  uploadAudio(buffer Buffer, filename string) Promisestring;
  
   Generar y subir PDF
  uploadPDF(content Buffer, filename string) Promisestring;
}
```

### 7.3 Whisper API - TranscripciÃ³n
```typescript
async function transcribeAudio(audioBuffer Buffer) Promisestring {
  const formData = new FormData();
  formData.append('file', audioBuffer, 'audio.ogg');
  formData.append('model', 'whisper-1');
  formData.append('language', 'es');
  
  const response = await fetch('httpsapi.openai.comv1audiotranscriptions', {
    method 'POST',
    headers { 'Authorization' `Bearer ${OPENAI_API_KEY}` },
    body formData
  });
  
  const result = await response.json();
  return result.text;
}
```

---

## 8. REGLAS DE NEGOCIO

### 8.1 PriorizaciÃ³n de Entregas
```
PRIORIDAD (de mayor a menor)
1. Ventana horaria dura (cliente solo recibe hasta X hora)
2. Urgencia declarada por Natalia
3. Urgencia declarada por vendedora
4. CercanÃ­a geogrÃ¡fica al punto actual
5. Orden de llegada del pedido
```

### 8.2 Escalamiento a Motorizado
```
CONDICIONES para usar motorizadotaxi
1. Flaco no disponible (ya en otra entrega)
2. Carga pesada o voluminosa
3. MÃºltiples puntos en poco tiempo

REQUISITO OBLIGATORIO
- AprobaciÃ³n previa de vendedora responsable
- Sin aprobaciÃ³n = Flaco asume costo personal
```

### 8.3 CÃ¡lculo de Costos de Movilidad
```
MODO COMBI (default)
- Usar matriz de costos predefinida
- Si ruta no existe en matriz solicitar costo al usuario

MODO TAXI (excepcional)
- Registrar costo real de inDrive
- Marcar que requiriÃ³ aprobaciÃ³n
- Registrar quiÃ©n aprobÃ³
```

---

## 9. MVP - ALCANCE FASE 1

### 9.1 Funcionalidades Incluidas
- [ ] Bot WhatsApp funcionando con nÃºmero de Flaco
- [ ] RecepciÃ³n y transcripciÃ³n de audios
- [ ] ExtracciÃ³n de acuerdos con proveedores
- [ ] Almacenamiento en Google Drive (JSON)
- [ ] Consultas bÃ¡sicas por voz (historial de precios)
- [ ] Vista de pendientes del dÃ­a
- [ ] Recordatorio de fin de dÃ­a

### 9.2 Funcionalidades Diferidas (Fase 2+)
- [ ] Registro detallado de movilidad paso a paso
- [ ] GeneraciÃ³n automÃ¡tica de reporte de movilidad PDF
- [ ] Alertas de riesgo por proveedor
- [ ] IntegraciÃ³n con otros usuarios (AngÃ©lica, Johana)
- [ ] Dashboard web para visualizaciÃ³n
- [ ] Palabra clave asiste para reenvÃ­o de mensajes

### 9.3 Criterios de Ã‰xito MVP
1. Flaco puede registrar un acuerdo con proveedor en 30 segundos
2. Flaco puede consultar precio histÃ³rico y obtener respuesta en 10 segundos
3. Sistema no pierde informaciÃ³n (persistencia confiable)
4. Funciona estable por 1 semana sin intervenciÃ³n

---

## 10. CONFIGURACIÃ“N INICIAL REQUERIDA

### 10.1 APIs y Credenciales
```yaml
OpenAI
  - API Key para Whisper
  - Costo estimado ~$0.006minuto de audio

Anthropic
  - API Key para Claude
  - Costo estimado ~$0.01-0.03 por interacciÃ³n

Google
  - Service Account con acceso a Drive
  - OAuth credentials para Drive API
```

### 10.2 Infraestructura
```yaml
OpciÃ³n A - Local
  - PC o Raspberry Pi 4 siempre encendido
  - Node.js 18+
  - ConexiÃ³n estable a internet
  
OpciÃ³n B - VPS
  - DigitalOceanHetzner bÃ¡sico (~$5mes)
  - Ubuntu 22.04
  - Node.js 18+
```

### 10.3 Datos Iniciales a Cargar
```yaml
Proveedores conocidos
  - Hugo (polos, bordados)
  - [Agregar otros proveedores frecuentes]

Clientes frecuentes
  - DHL
  - [Agregar inmobiliarias y otros]

Matriz de costos
  - Rutas frecuentes Miraflores â†” distritos de Lima
```

---

## 11. COMANDOS PARA CLAUDE CODE

### 11.1 Iniciar Proyecto
```bash
# Crear estructura de proyecto
mkdir logistica-creaactivo
cd logistica-creaactivo
npm init -y
npm install typescript whatsapp-web.js @anthropic-aisdk googleapis node-cron
npm install -D @typesnode ts-node
```

### 11.2 Estructura de Archivos Sugerida
```
logistica-creaactivo
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ index.ts              # Entry point
â”‚   â”œâ”€â”€ whatsapp
â”‚   â”‚   â”œâ”€â”€ client.ts         # WhatsApp client setup
â”‚   â”‚   â””â”€â”€ handlers.ts       # Message handlers
â”‚   â”œâ”€â”€ services
â”‚   â”‚   â”œâ”€â”€ transcription.ts  # Whisper integration
â”‚   â”‚   â”œâ”€â”€ extraction.ts     # Claude entity extraction
â”‚   â”‚   â”œâ”€â”€ storage.ts        # Google Drive operations
â”‚   â”‚   â””â”€â”€ queries.ts        # Query processing
â”‚   â”œâ”€â”€ models
â”‚   â”‚   â””â”€â”€ types.ts          # TypeScript interfaces
â”‚   â””â”€â”€ config
â”‚       â””â”€â”€ constants.ts      # Configuration
â”œâ”€â”€ data
â”‚   â””â”€â”€ matriz_costos.json    # Initial cost matrix
â”œâ”€â”€ .env                      # API keys (gitignored)
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

### 11.3 InstrucciÃ³n Principal para Claude Code
```
Construye un bot de WhatsApp para gestiÃ³n logÃ­stica segÃºn el spec LOGISTICA_SPEC.md.

PRIORIDAD DE IMPLEMENTACIÃ“N
1. Setup bÃ¡sico de WhatsApp Web.js con autenticaciÃ³n
2. RecepciÃ³n de audios y transcripciÃ³n con Whisper
3. ExtracciÃ³n de entidades con Claude API
4. Persistencia en archivos JSON locales (antes de Drive)
5. Consultas bÃ¡sicas de historial
6. IntegraciÃ³n con Google Drive
7. Recordatorio de fin de dÃ­a

NOTAS
- Usuario principal nÃºmero de WhatsApp de Flaco
- Toda interacciÃ³n es en espaÃ±ol
- Respuestas deben ser concisas (usuario en campo)
- Audios son la entrada principal, texto la salida principal
```

---

## 12. GLOSARIO

 TÃ©rmino  DefiniciÃ³n 
---------------------
 Pedido  Unidad de trabajo completa para un cliente 
 RQ  Control interno de Creaactivo (documento contable) 
 En campo  Flaco estÃ¡ fuera de oficina haciendo entregasrecojos 
 Motorizado  Servicio de delivery externo (inDrive) 
 Adelanto  Pago parcial inicial al proveedor (usualmente 50%) 
 Factor de demora  DÃ­as extra que se pide a un proveedor conocido por demorar 
 Modo combi  Cobrar movilidad a tarifa de transporte pÃºblico 
 Modo taxi  Cobrar movilidad a tarifa real (requiere aprobaciÃ³n) 

---

## 13. NOTAS FINALES

### Decisiones de DiseÃ±o Clave
1. Audio como entrada principal El usuario estÃ¡ en campo manejando, no puede escribir
2. Texto como salida Puede leer cuando tenga un momento, no necesita audio
3. Google Drive como persistencia Familiar para el usuario, fÃ¡cil de inspeccionar manualmente
4. MVP solo para Flaco Simplifica permisos y flujos, escalar despuÃ©s
5. Sin integraciÃ³n directa a WhatsApp de terceros Privacidad del nÃºmero personal

### Riesgos Identificados
1. WhatsApp Web.js puede ser bloqueado Tener plan B (Telegram)
2. Costos de API pueden escalar Monitorear uso de Whisper y Claude
3. Dependencia de conectividad El bot necesita internet estable

### MÃ©tricas de Ã‰xito Post-MVP
- Tiempo promedio de registro de acuerdo
- Consultas exitosas vs fallidas
- InformaciÃ³n recuperada vs perdida
- SatisfacciÃ³n del usuario (Flaco)

---

Documento generado a partir de entrevista de extracciÃ³n de conocimiento tÃ¡cito.
Listo para implementaciÃ³n con Claude Code.